*Values
*Units for the values: V, mA, kOhm and mS
*R1 =10000 Ohm
*R2 = 10000 Ohm
*C=10*10‚Åª6 F

* forces current values to be saved
.options savecurrents

*************Circuito que mandei para o messenger*****************

***Fonte dependente (meti amplitude de 13.94 que equivale a 230/16.5)
Vs 1 0 0 sin(0 23 50 0 0 90)

***Envelope detector***
De 1 2 Default_1
R1 2 0 10k
C 2 0 10u

***Voltage regulator***
R2 2 3 1k
Dr1 3 0 Default







.model Default D (n=18)
.model Default_1 D
.op
.end



.control

*makes plots in color
set hcopypscolor=0
set color0=white
set color1=black
set color2=red
set color3=blue
set color4=violet
set color5=rgb:3/8/0
set color6=rgb:4/0/0


*3)

*4) 
echo "********************************************"
echo  "Transient analysis"
echo "********************************************"
tran 1e-5 0.7 0.5

***Average***
meas tran yavg AVG v(3) from=500m to=700m

*** max and min vO***
meas tran ymax MAX v(3) from=500m to=700m
meas tran ymin MIN v(3) from=500m to=700m

let vripple_reg = ymax - ymin

print yavg ymax ymin vripple_reg

plot  v(2) v(1)
hardcopy Ven.ps v(2) v(1)

plot  v(3)
hardcopy Vout.ps v(3)

*5)
plot v(3)-12
hardcopy v(o)-12.ps v(3)-12


quit
.endc


